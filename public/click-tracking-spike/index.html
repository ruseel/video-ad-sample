<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

      <button id="btn" type="button" name="button">Change</button>

      <script type="text/javascript">
        // 버튼을 누르면 location.href=가 바뀌는데
        // 그 전에 xhr로 요청을 보내도록 한다.

        function xx() {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', 'http://localhost:9000/slow')
          xhr.onload = function() {
            console.log("success " + this.state);
          }
          xhr.onerror = function () {
            console.log("error " + this.state);
          }
          xhr.send();
        }

        document.getElementById('btn').addEventListener('click', function () {
          xx();
          location.href='http://daum.net';
        })
      </script>
  </body>
</html>
